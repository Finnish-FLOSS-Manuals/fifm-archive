<div id="main-content"><h1>Lisää kirjojen CSS-muotoilua </h1>
<p><span>Kirjoittaja on Jamie Simmons</span> </p>
<p>Yksi asioista, joka veti minua puoleensa Booki-projektissa, oli mahdollisuus luoda painokelpoinen kirja. Kuulin Bookista FLOSS Manualsin verkkosivun kautta, sivuilla on joukko Sugar Labsin ja One Laptop Per Child -projektin kirjoittamia käyttöoppaita. Nämä oppaat kirjoitettiin käyttäen ohjelmaa, josta tuli Bookin prototyyppi. </p>
<p>Olin toiminut Sugar Labsin ja OLPC:n parissa monta vuotta, kirjoitin muutaman aktiviteetin, jotka toimivat Sugarissa, joka on OLPC-projektin käyttämä käyttöjärjestelmä. Opin tämä lukemalla Wikin artikkeleita, kysymällä kysymyksiä postilistoilla, katsomalla muiden ihmisten koodia jne. Se oli pitkä ja turhauttava projekti. Oli vain yksi opas Sugar-aktiviteettien tekemisestä, sen oli luonut Itävallan OLPC-projekti, eikä se oikein sopinut uudelle ohjelmoijalle. Olen ammatiltani tietokoneohjelmoija ja jouduin silti opettelemaan monia uusia asioita ennen kuin sain ensimmäisen aktiviteettini tehtyä. </p>
<p>Yksi OLPC:n ja Sugar Labsin päämäärä on antaa opettajien ja oppilaiden ohjelmoida omat aktiviteettinsa, tarvitsemme todella tälle yleisölle suunnatun oppaan. Sen täytyy olla opas, jonka kuka tahansa voi lukea ilmaiseksi verkossa tai ladata e-kirjana, mutta tahdoin saataville myös painettavan kirjan. </p>
<p>Bookilla on kirjoittajalle paljon tarjottavaa, myös ilman mahdollisuutta sidotun ja painetun kirjan luomiseen, mutta painetussa kirjassa on jotain konkreettista, mikä on hyvä motivoija. Painetujen kirjojen kirjoittajat pääsevät television keskusteluohjelmaan, heitä arvostetaan, he pääsevät kertomaan vitsejä kalliissa ravintolassa. Verkkosivujen ja e-kirjojen tekijöille ei tarjota tätä kaikkea. </p>
<p>Minulla on melko hyvä kokoelma vanhoja kirjoja kotonani ja kunnioitan suuresti ihmisiä, jotka suunnittelevat kirjoja. En kuitenkaan koskaan pyrkinyt liittymään heidän joukkoonsa. Kun laitoimme ensimmäisen kirjani Lulu-kirjakauppaan, käytin vain OBJAVI:n (Bookin osa, joka luo PDF-tiedostoja HTML-koodistasi) oletusarvoista tyylitiedostoa, enkä ollut kovin tyytyväinen saamaani versioon kirjasta. Leipätekstin kirjasin oli liian pieni, muotoiltujen koodinäytteiden kirjasin oli vielä pienempi, lukujen otsikot ja alaotsikot olivat ISOILLA KIRJAIMILLA, lisäksi sivunvaihdot olivat usein outoja. Esimerkiksi alaotsikot olivat sivun alaosassa ja alaotsikkojen sisältö seuraavalla sivulla.</p>
<p>Tämä kaikki olisi tietysti pitänyt huomata ennen PDF-tiedoston lähettämistä painotaloon, mutta en tehnyt näin parista syystä:</p>
<ul><li>Adobe Reader näyttää PDF-tiedoston sivut suurennettuna kokoon 160% tai mitä ruudun täyttämiseen tarvitaankin. Tällä suurennoksella sivu näytti hyvältä. </li>
<li>Lulu itse asiassa kutistaa PDF-tiedoston sivuja hieman tehdessään kirjan. </li>
</ul><p>Onneksi Lulu on print on demand -yhtiö, joten ongelmana ei ollut varastoa täynnä kirjoja. Poistimme kirjan Lulusta ja etsin ongelmille ratkaisun. Jouduin laatimaan oman tyylitiedoston. </p>
<p>Kuka tahansa verkkosivun tulostanut tietää, että HTML-tulostaminen on surkeassa tilassa. (Ammatimaisena web developerina olen käyttänyt kovempia sanoja, mutta "valitettava" riittää viestimään ajatukseni.) W3C on luonut standardeja tyylitiedostoille, joita käytetään juuri tulostamiseen. Mikään verkkoselain ei itse asiassa ole ottanut näitä käyttöön, ei myöskään OBJAVI:n käyttämä "Webkit" selainmoottori, mutta silti on mahdollista käyttää HTML-koodia ja tyylitiedostoja käyttökelpoisen ja kauniin kirjan luomiseen. Tähän liittyy muutamia temppuja, jotka selitän. Katsotaanpa ensin tyylitiedostoani:</p>
<pre>body {
  font-family: "Palatino Linotype", Georgia, Serif;
  font-size: 14pt;
  background: #fff;
  color: #000;
}

h1, h2, h3, h4, h5, h6{
  font-family: "Gentium Book Basic";
  page-break-after: avoid;
}

.unseen{
  z-index: -66;
  margin-left: -1000pt;

}

.objavi-chapter{
  color: #000;
}

h1 .initial{
  color: #000;
  font-size: 2em;
}

.objavi-subsection{
  display: block;
  page-break-before: always;
  font-size: 15pt;
}

body .objavi-subsection:first-child{
  page-break-before: avoid;
}

.objavi-forcebreak {
  page-break-after: always;
}

.objavi-subsection .initial {
  font-size: 1em;
  color: #000;
}

.objavi-subsection-heading{
  font-size: 24pt;
  font-weight: bold;
}

h1 {
  page-break-before: always;
  background: white;
}

table {
  float: none;
}

h1.frontpage{
  font-size: 48pt;
  text-align: center;
  page-break-after: always;
  page-break-before: avoid;
  max-width: 700px;
}

div.copyright{
  padding: 1em;
}

table.toc {
  /*border: 1px dotted #999;*/
  font-size: 17pt;
  width: 95%;
}

td.chapter {
  padding-left: 2em;
  text-align: right;
}

td.pagenumber {
  text-align: right;
}

td.section {
  font-size: 1.1em;
  font-weight: bold;
}

p, ul, ol {
  page-break-inside: avoid;
}

pre, code, tt {
  font-family: "Courier New", "Courier", monospace;
  font-size: 12pt;
}

pre {
  max-width:700px;
  overflow: hidden;
}

img {
  max-width: 700px;
  height: auto;
}
</pre>
<p>Tämä tyylitiedosto on paljolti sama kuin oletusarvoinen tyylitiedosto, mutta siinä on seuraavat muutokset: </p>
<ul><li>Muutin otsikoiden ja leipätekstin kirjasimet samoiksi joita kirja <em>Collaborative Futures</em> käyttää.</li>
<li>Muutin leipätekstin ja muotoillun tekstin kirjasinkokoot pistekokoihin "ems"-koon sijasta. Käytin pistekokoa 14 Palatino-leipätekstille ja pistekokoa 12 muotoiltujen koodiesimerkkien Courier-kirjasimeen. Jostain syystä Serif-kirjasimet näyttävät pienemmille samalla pistekoolla kuin Sans Serif. Pistekoolla 12 Platino-teksti on itse asiassa suunnilleen samaa kokoa kuin teksti, jota yritin korjata.</li>
<li>Postin otsikot ISOIKSI KIRJAIMIKSI muuttavan tyylin. </li>
<li>Laitoin tilapäisesti kehyksen tagin PRE tekstin ympärille. Kun tein muotoillun tekstin suuremmaksi, osa siitä leikattiin pois. Tarvitsen tavan huomata helposti kun näin tapahtuu, ja kehys teki tämän. Koska suurin osa kirjasta oli muokattuja koodiesimerkkejä, käytin paljon aikaa muokatakseni Python-koodin sopimaan sivulle. </li>
<li>Lopuksi tein oman tyylini luokalle “objavi-forcebreak”. Tarvitsin tätä pakottaakseni sivunvaihtoja PDF-tiedostoon.</li>
</ul><p>Viimeinen kohta kaipaa selitystä. Ihanteellisesti OBJAVI ei laittaisi alaotsikkoa sivun alaosaan ja seuraavaa kappaletta seuraavalle sivulle. Jos Webkit tukisi CSS-ominaisuutta, joka pitää alaotsikon samalla sivulla kuin alaotsikon, tämä olisi mahdollista, mutta Webkit ei tue sitä. Meidän täytyy auttaa Webkitiä laittamalla sivunvaihtoja tarpeellisiin paikkoihin. Tehdäksemme tämän joudumme muokkaamaan raakaa HTML-koodia. </p>
<p>Onneksi tämä ei ole liian kamalaa. Sinun täytyy kääntää HTML-tila päälle sivueditorissa ja etsiä otsikko, jonka tahdot siirtää alemmas. Se näyttää tältä:</p>
<pre>&lt;h2&gt;Huonosti sijoitettu otsikkoni&lt;/h2&gt;
</pre>
<p>Lisää tällainen DIV-tagi pakottaaksesi sivunvaihdon:</p>
<pre>&lt;div class="objavi-forcebreak"&gt;&lt;/div&gt;
&lt;h2&gt;Huonosti sijoitettu otsikkoni&lt;/h2&gt;
</pre>
<p>Käyttäessäsi uutta tyylitiedostoa tämä DIV pakottaa sivunvaihdon paikkaan, johon sijoitat sen. </p></div><ul Class="menu-goes-here"><li Class="booki-section">Johdanto</li><li><a href="/booki/index">Mikä on Booki</a></li>
<li><a href="/booki/ch002_mihin-bookia-voi-kayttaa">Mihin Bookia voi käyttää</a></li>
<li Class="booki-section">Aloittaminen</li><li><a href="/booki/ch004_bookiin-paaseminen">Bookiin pääseminen</a></li>
<li><a href="/booki/ch005_kayttajatunnuksen-luominen">Käyttäjätunnuksen luominen</a></li>
<li><a href="/booki/ch006_asetukseni">Asetukseni</a></li>
<li><a href="/booki/ch007_kirjan-luominen">Kirjan luominen</a></li>
<li Class="booki-section">Kirjojen muokkaaminen</li><li><a href="/booki/ch009_lukujen-luominen">Lukujen luominen</a></li>
<li><a href="/booki/ch010_lukujen-muokkaus">Lukujen muokkaus</a></li>
<li><a href="/booki/ch011_sisallysluettelo">Sisällysluettelo</a></li>
<li><a href="/booki/ch012_kuvien-lisaaminen">Kuvien lisääminen</a></li>
<li Class="booki-section">Muiden kanssa työskentely</li><li><a href="/booki/ch014_ryhman-luominen">Ryhmän luominen</a></li>
<li><a href="/booki/ch015_ryhmaan-liittyminen">Ryhmään liittyminen</a></li>
<li><a href="/booki/ch016_kirjan-lisaaminen-ryhmaan">Kirjan lisääminen ryhmään</a></li>
<li><a href="/booki/ch017_viestinta">Viestintä</a></li>
<li Class="booki-section">Kehittynyt käyttö</li><li><a href="/booki/ch019_kirjan-tuominen">Kirjan tuominen</a></li>
<li><a href="/booki/ch020_vieminen">Vieminen</a></li>
<li Class="booki-section">Asentaminen</li><li><a href="/booki/ch022_linuxiin-asentaminen">Linuxiin asentaminen</a></li>
<li Class="booki-section">Ulkoasun muokkaaminen</li><li><a href="/booki/ch024_kirjojen-css-muotoilu">Kirjojen CSS-muotoilu</a></li>
<li><a href="/booki/ch025_lisaa-css-suunnittelua">Lisää CSS-suunnittelua</a></li>
<li Class="booki-section">Teknologia</li><li><a href="/booki/ch027_osallistuminen">Osallistuminen</a></li>
<li><a href="/booki/ch028_ydinosat">Ydinosat</a></li>
<li><a href="/booki/ch029_teknologiat">Teknologiat</a></li>
<li><a href="/booki/ch030_ominaisuudet">Ominaisuudet</a></li>
<li><a href="/booki/ch031_virheraportointi">Virheraportointi</a></li>
<li Class="booki-section">Liitteet</li><li><a href="/booki/ch033_oppaasta">Oppaasta</a></li>
<li><a href="/booki/ch034_lisenssi">Lisenssi</a></li>
</ul>